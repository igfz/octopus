/**
 * 插件集合
 * date：4.30.2015
 * author:龚法曾
 * dialog api:http://www.baidufe.com/component/jDialog/api.html
 * juicer api:http://juicer.name/docs/docs_zh_cn.html
 * cookie api:https://github.com/carhartl/jquery-cookie
 * validform_v5 api：http://validform.rjboy.cn/download.html
 * upload api：https://github.com/aralejs/upload
 **/
/*dialog 弹出框插件*/
var jDrag=function(c,u){var l=function(f){if(f.handle){var e=c.extend({},f),l=c(e.handle),n=e.target&&c(e.target),r=null,q=(e.type||"").toString().toUpperCase();l[0].onselectstart=function(){return!1};l.attr("unselectable","on").css("MozUserSelect","none");var p=null,t=null,a=function(a){var b=a.pageX-t[0],d=a.pageY-t[1];if(n){var h={};"Y"!==q&&(h.left=r.left+b);"X"!==q&&(h.top=r.top+d);c.isEmptyObject(h)||n.css(h)}if(c.isFunction(e.onMove))e.onMove(a,b,d)},b=function(d){c(document).unbind("mousemove",a).unbind("mouseup",b);p=!1;if(c.isFunction(e.onUp))e.onUp(d)},d=function(d){p&&b();if(c.isFunction(e.onDown))e.onDown(d);n&&(r={left:n[0].offsetLeft,top:n[0].offsetTop});t=[d.pageX,d.pageY];c(document).bind("mousemove",a).bind("mouseup",b)};e.handle.bind("mousedown",d);this.remove=function(){c(document).unbind("mousemove",a);c(document).unbind("mousemove",b);c(document).unbind("mousedown",d)};this.destroy=function(){l.unbind("mousedown",d)}}};return{init:function(c){return new l(c)}}}(jQuery),jMask=function(c,u){var l=function(f){var e=this;this.cfg=c.extend({zIndex:1024,resizable:!0},f);this.element=c('<div class="j-dialog-mask '+(this.cfg.className||"")+'"/>').appendTo(document.body).css({display:"none",zIndex:this.cfg.zIndex});this.cfg.show&&this.show();this.resizeFunc=function(){e.triggerHandler("resize")};this.cfg.resizable&&c(window).bind("resize",this.resizeFunc)};l.prototype={constructor:l,show:function(){this.element.show.apply(this.element,arguments);this._processTages(1)},hide:function(){this.element.hide.apply(this.element,arguments);this._processTages(0)},css:function(){this.element.css.apply(this.element,arguments)},triggerHandler:function(){this.element.triggerHandler.apply(this.element,arguments)},bind:function(){this.element.bind.apply(this.element,arguments)},remove:function(){this._processTages(0);this.element&&this.element.remove();c(window).unbind("resize",this.resizeFunc);for(var f in this)delete this[f]},_processTages:function(f){var e=this,l=navigator.userAgent.toLowerCase();if(/msie/.test(l)&&!/opera/.test(l))if(e.special=e.special||[],f)0<e.special.length||(f=c("SELECT"),this.cfg.safety&&(f=f.filter(function(c){return 0==e.cfg.safety.find(this).length})),f.each(function(){var f=c(this);e.special.push({dom:this,css:f.css("visibility")});f.css("visibility","hidden")}));else for(f=0,l=e.special.length;f<l;f++)c(e.special[f].dom).css("visibility",e.special[f].css||""),e.special[f].dom=null}};return{init:function(c){return new l(c)}}}(jQuery),jDialog=function(c,u){var l=function(){var a=navigator.userAgent.toLowerCase();return{version:(a.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(a),opera:/opera/.test(a),msie:/msie/.test(a)&&!/opera/.test(a),mozilla:/mozilla/.test(a)&&!/(compatible|webkit)/.test(a)}}(),f=l.msie&&6==parseInt(l.version,10),e=l.msie&&8==parseInt(l.version,10),w="show close resize hide enterKey escKey".split(" "),n=[],r={modal:!0,title:null,content:null,width:300,height:null,minWidth:200,minHeight:60,maxWidth:null,maxHeight:null,padding:"10px",fixed:!0,left:null,top:null,closeable:!0,hideOnClose:!1,draggable:!0,contentType:null,zIndex:1024,resizable:!1,autoShow:!0,autoMiddle:!0,autoClose:0,showShadow:!0,showTitle:!0,textAlign:"inherit",buttonAlign:"right",dialogClassName:null,maskClassName:null,wobbleEnable:!1,closeOnBodyClick:!1,stopScroll:!0,buttons:[],events:{}},q=function(a){n.push(this);this.cfg=c.extend({},r,a);this.dom={element:null,buttons:[]};this._init()};q.prototype={constructor:q,_tempVars:{},_getScrollWidth:0,title:function(a){return(a||"").length?(this.dom.element.find(".j-dialog-title>span.j-dialog-txt").html(a||""),this):this.dom.element.find(".j-dialog-title>span.j-dialog-txt").html()},content:function(a){return(a||"").length?(this.dom.element.find(".j-dialog-body").html(a).css({"text-align":this.cfg.textAlign}),this):c(".j-dialog-body",this.dom.element).html()},width:function(a){return 0<=parseInt(a,10)?(this.dom.element.css("width",a),this):parseInt(this.dom.element.css("width"),10)},height:function(a){if(a=parseInt(a,10)||0){var b=0,d=(this.cfg.padding||"").split(/\s+/);switch(d.length){case 4:case 3:b+=(parseInt(d[0],10)||0)+(parseInt(d[2],10)||0);break;case 2:case 1:b+=2*(parseInt(d[0],10)||0)}b+=35;this.cfg.minHeight&&(a=Math.max(a,this.cfg.minHeight));this.cfg.maxHeight&&(a=Math.min(a,this.cfg.maxHeight));a-=b;c(".j-dialog-body",this.dom.element).css("height",a);return this}return parseInt(this.dom.element.css("height"),10)},middle:function(){var a=c(document),b=c(window),d=this.cfg.fixed&&!f?[0,0]:[a.scrollLeft(),a.scrollTop()],a=d[0]+(b.width()-this.dom.element.outerWidth())/2,b=d[1]+(b.height()-this.dom.element.outerHeight())/2;return this.position({left:a,top:0<=b?b:0})},position:function(a){return a.left&&!isNaN(parseInt(a.left,10))||a.top&&!isNaN(parseInt(a.top,10))?(!a.left||isNaN(parseInt(a.left,10))?this.dom.element.css({top:a.top}):!a.top||isNaN(parseInt(a.top,10))?this.dom.element.css({left:a.left}):this.dom.element.css({left:a.left,top:a.top}),this.triggerHandler("resize"),this):this.dom.element.offset()},show:function(){if(!this.dom.element.is(":visible")){this.dom.element.show.apply(this.dom.element,arguments);this.mask&&(this.mask.cfg.safety=this.dom.element,this.mask.show.apply(this.mask,arguments));if(this.cfg.autoClose){var a=this,b=setTimeout(function(){a.close()},parseInt(this.cfg.autoClose,10)||3E3);a.closeTimer=b}this.cfg.stopScroll&&(c(document).height()>c(window).height()+(e?4:0)&&c("html").css("margin-right",this._getScrollWidth),c("html").css("overflow","hidden"));this.triggerHandler("show");return this}},hide:function(){clearTimeout(this.closeTimer);this.dom.element.hide();this.mask&&this.mask.hide.apply(this.mask,arguments);this.cfg.stopScroll&&c("html").removeAttr("style");return this},close:function(){if(!this.dom.element[0])return this;this.triggerHandler("close");c(window).unbind("resize",this._tempVars.onResize);this.cfg.stopScroll&&c("html").removeAttr("style");if(this.cfg.hideOnClose)return this.hide(),this;this.mask&&this.mask.remove();this._tempVars.dragObj&&this._tempVars.dragObj.remove();this.dom.element.remove();for(var a=0,b=n.length;a<b;a++)if(n[a]==this){n.splice(a,1);break}return this},buttons:function(a){var b=this;if(a&&0<a.length){this.cfg.buttons=a;var d=[];c.each(a,function(a,b){var c="j-dialog-btn";"highlight"==b.type&&(c+=" x-highlight");d.push('<input type="button" class="'+c+'" value="'+(b.text||"\u786e\u5b9a")+'" />')});var v=c('<div class="j-dialog-buttons"></div>').appendTo(this.dom.element).html(d.join(""));v.css("text-align",this.cfg.buttonAlign||"right");var e=this.dom.buttons=c("input[type=button]",v);c.each(a,function(a,d){var g=c(e[a]);g.click(function(a){d.handler&&"function"==typeof d.handler&&d.handler.call(g[0],g,b)});f||g.hover(function(a){a="x-hover";g.hasClass("x-highlight")&&(a="x-hlhover");g.addClass(a)},function(a){g.removeClass("x-hover").removeClass("x-hlhover")})});return this}return this.dom.buttons},bind:function(){this.dom.element.bind.apply(this.dom.element,arguments);return this},triggerHandler:function(){this.dom.element.trigger.apply(this.dom.element,arguments);return this},_init:function(){var a=this;this.cfg.showTitle||(this.cfg.draggable=!1);isNaN(parseInt(this.cfg.top))&&isNaN(parseInt(this.cfg.left))&&!this.cfg.anchor||(this.cfg.autoMiddle=!1);var b="j-dialog "+(this.cfg.dialogClassName?this.cfg.dialogClassName:"");!f&&this.cfg.fixed&&(b+=" j-dialog-fix");this.cfg.showShadow&&(b+=" j-dialog-shadow");this._addMask();this._getScrollWidth=t();this.dom.element=c('<div class="'+b+'"></div>').css({zIndex:this.cfg.zIndex,display:"none"}).appendTo(document.body).focus();this._setupTitleBar().title(this.cfg.title);this._setupContent().content(this.cfg.content);this.buttons(this.cfg.buttons);this.width(this.cfg.width);this.height(this.cfg.height);c(".j-dialog-body",this.dom.element).css("padding",this.cfg.padding);c.each(w,function(b,c){a.cfg.events[c]&&a.dom.element.bind(c,{dialog:a},a.cfg.events[c])});this._setupEscKey()._setupEnterKey()._setupBodyClick();this.cfg.autoShow&&this.show();if(this.cfg.anchor){this._tempVars.domAnchor=c(this.cfg.anchor.target);if(!this._tempVars.domAnchor[0])throw Error('The "anchor.target" must be a HTMLElement instance!');this._setupTriangle()}else this.cfg.autoMiddle?this.middle():this.position({left:this.cfg.left,top:this.cfg.top});this._tempVars.onResize=function(){c(window).unbind("resize",a._tempVars.onResize);a.cfg.autoMiddle&&a.middle();a.triggerHandler("resize");a.sizeTimer=setTimeout(function(){c(window).bind("resize",a._tempVars.onResize)},10)};c(window).bind("resize",this._tempVars.onResize)},_addMask:function(){var a=this;if(this.cfg.modal){var b={};this.cfg.maskClassName&&(b.className=this.cfg.maskClassName);b.zIndex=this.cfg.zIndex;this.mask=jMask.init(b);this.cfg.wobbleEnable&&(this._tempVars.cssAnimationGoing=!1,this.mask.element.click(function(b){if(a._tempVars.cssAnimationGoing)return!1;a.dom.element.addClass("j-ani-wobble");a._tempVars.cssAnimationGoing=!0;setTimeout(function(){a.dom.element.removeClass("j-ani-wobble");a._tempVars.cssAnimationGoing=!1},1100)}))}return a},_setupBodyClick:function(){var a=this;if(!a.cfg.closeOnBodyClick)return this;var b=function(b){c.contains(a.dom.element[0],b.target)||a.close()};a.bind("show",function(a){c(document).bind("mousedown",b)});c.each(["hide","close"],function(d,e){a.bind(e,function(a){c(document).unbind("mousedown",b)})});return a},_setupTitleBar:function(){var a=this;if(this.cfg.closeable){var b=c('<a href="#" class="j-dialog-close" title="\u5173\u95ed">&nbsp;</a>').appendTo(this.dom.element).bind({click:function(b){a.cfg.hideOnClose?a.hide():a.close();b.preventDefault();b.stopPropagation()},mousedown:function(a){a.preventDefault();a.stopPropagation()}});this.cfg.showTitle||b.addClass("btn-without-title")}if(!this.cfg.showTitle)return a;this._tempVars.titleBar=c('<div class="j-dialog-title"><span class="j-dialog-txt"></span></div>').appendTo(this.dom.element);this.cfg.draggable&&(this._tempVars.titleBar.addClass("j-draggable"),this._tempVars.dragObj=jDrag.init({handle:a._tempVars.titleBar,target:a.dom.element,onDown:function(){a._setupHackDiv(1);a.dom.element.addClass("j-user-select")},onUp:function(){a._setupHackDiv(0);a.dom.element.removeClass("j-user-select")}}));return a},_setupHackDiv:function(a){a?0<c("IFRAME",this.dom.element).length&&(a=c(".j-dialog-content",this.dom.element),this.hack_div=(this.hack_div||c("<div></div>")).appendTo(a).css({position:"absolute",left:0,top:0,cursor:"move",display:"block",width:this.dom.element.outerWidth(),height:this.dom.element.outerHeight()})):this.hack_div&&this.hack_div.css("display","none");return this},_setupEscKey:function(){var a=this,b=function(b){27==b.keyCode&&a.triggerHandler("escKey")};c(a.dom.element).bind("show",function(a){c(document).bind("keydown",b)});c.each(["hide","close"],function(d,e){c(a.dom.element).bind(e,function(a){c(document).unbind("keydown",b)})});return a},_setupEnterKey:function(){var a=this,b=function(b){13!=b.keyCode&&10!=b.keyCode||a.triggerHandler("enterKey")};c(a.dom.element).bind("show",function(a){c(document).bind("keydown",b)});c.each(["hide","close"],function(d,e){c(a.dom.element).bind(e,function(a){c(document).unbind("keydown",b)})});return a},_setupTriangle:function(){this._tempVars.triangle=c('<div class="j-triangle"><div class="t-border"></div><div class="t-inset"></div></div>').appendTo(this.dom.element).addClass("anchor-"+{left:"right",right:"left",top:"bottom",bottom:"top"}[{left:"left","left-top":"left","left-bottom":"left",top:"top","top-left":"top","top-right":"top",right:"right","right-top":"right","right-bottom":"right",bottom:"bottom","bottom-left":"bottom","bottom-right":"bottom"}[this.cfg.anchor.position||"right"]]);var a={},b={},d=this._tempVars.domAnchor.offset(),e=parseInt(this._tempVars.domAnchor.width(),10),f=parseInt(this._tempVars.domAnchor.height(),10),m=parseInt(this.width(),10),h=parseInt(this.height(),10),g=c.extend({top:0,left:0,right:0,bottom:0},this.cfg.anchor.offset||{}),k=parseInt(this.cfg.anchor.trianglePosFromStart,10)||0;switch((this.cfg.anchor.position||"right").toLowerCase()){case "top":a={top:0,left:k?k:(m-24)/2};b={top:d.top-h-12-g.top,left:d.left+(e-m)/2+g.left};break;case "top-left":a={top:0,left:k?k:(m-24)/2};b={top:d.top-h-12-g.top,left:d.left+g.left};break;case "top-right":a={top:0,left:k?m-24-k:(m-24)/2};b={top:d.top-h-12-g.top,left:d.left+e-m+g.right};break;case "right":a={top:k?k-h:-(h+24)/2,left:-24};b={top:d.top+(f-h)/2+g.top,left:d.left+e+12+g.right};break;case "right-top":a={top:k?k-h:-(h+24)/2,left:-24};b={top:d.top+g.top,left:d.left+e+12+g.right};break;case "right-bottom":a={top:k?-24-k:-(h+24)/2,left:-24};b={top:d.top+f-h-g.bottom,left:d.left+e+12+g.right};break;case "bottom":a={top:-(h+24),left:k?k:(m-24)/2};b={top:d.top+f+12+g.bottom,left:d.left+(e-m)/2+g.left};break;case "bottom-left":a={top:-(h+24),left:k?k:(m-24)/2};b={top:d.top+f+12+g.bottom,left:d.left+g.left};break;case "bottom-right":a={top:-(h+24),left:k?m-24-k:(m-24)/2};b={top:d.top+f+12+g.bottom,left:d.left+e-m+g.right};break;case "left":a={top:k?k-h:-(h+24)/2,left:m};b={top:d.top+(f-h)/2+g.top,left:d.left-m-12-g.left};break;case "left-top":a={top:k?k-h:-(h+24)/2,left:m};b={top:d.top+g.top,left:d.left-m-12-g.left};break;case "left-bottom":a={top:k?-24-k:-(h+24)/2,left:m},b={top:d.top+f-h-g.bottom,left:d.left-m-12-g.left}}this._tempVars.triangle.css(a);this.position(b);this.dom.element.css("overflow","visible");return this},_setupContent:function(){"iframe"===this.cfg.contentType&&(this.cfg.content=c("<iframe></iframe>").css({width:"100%",height:"100%",border:"none"}).attr({src:this.cfg.content,frameBorder:0}));var a=c('<div class="j-dialog-content"><div class="j-dialog-body"></div></div>'),b=this;this.dom.element.append(a);if(this.cfg.resizable){var d=c(".j-dialog-content",b.dom.element);this.cfg.minWidth=this.cfg.minWidth||0;this.cfg.minHeight=this.cfg.minHeight||0;c.each(["es"],function(a,e){var f=c('<div class="resizable-'+e+'"><div></div></div>');b.dom.element.append(f);var h=null,g=null;jDrag.init({handle:f,onDown:function(a){b._setupHackDiv(1);h=parseInt(b.dom.element.width());g=parseInt(d.height());b.dom.element.addClass("j-user-select")},onMove:function(a,c,e){a=h+c;var f=g+e;b.cfg.minWidth&&a<b.cfg.minWidth&&0>c||b.cfg.maxWidth&&a>b.cfg.maxWidth&&0<c||b.dom.element.width(a);b.cfg.minHeight&&f<b.cfg.minHeight&&0>e||b.cfg.maxHeight&&f>b.cfg.maxHeight&&0<e||d.height(f);c=b.dom.element.outerWidth();e=b.dom.element.outerHeight();b.hack_div&&b.hack_div.css({width:c,height:e})},onUp:function(a){b._setupHackDiv(0);b.dom.element.removeClass("j-user-select")}})})}return b}};var p=function(a){a=c.extend({},a||{});return new q(a)},t=function(){var a=c('<div style="overflow:scroll;"><div></div></div>').appendTo("body"),b=a.width(),d=a.find("div").width();a.remove();return b-d};return{version:"1.3",dialog:p,alert:function(a,b,d){d=d||{};b=c.extend({type:"highlight",handler:function(a,b){b.close()}},b||{});d=c.extend({wobbleEnable:!0},d,{content:a,buttons:[].concat(b),title:d.title?d.title:"\u63d0\u793a"});return p(d)},confirm:function(a,b,d,e){e=e||{};b=c.extend({type:"highlight",handler:function(a,b){b.close()}},b||{});d=c.extend({text:"\u53d6\u6d88",handler:function(a,b){b.close()}},d||{});e=c.extend({wobbleEnable:!0},e,{content:a,buttons:[].concat([b,d]),title:e.title?e.title:"\u786e\u8ba4"});return p(e)},message:function(a,b){b=b||{};b=c.extend({content:a,padding:"20px 10px 20px 10px",textAlign:"center"},b,{showTitle:!1});return p(b)},tip:function(a,b,d){d=d||{};d=c.extend({padding:"20px 10px 20px 10px",textAlign:"center",width:"auto",stopScroll:!1,showShadow:!1,anchor:{target:null,position:"right"}},d,{content:a,anchor:b,showTitle:!1,modal:!1,fixed:!1});return p(d)},iframe:function(a,b){b=b||{};b=c.extend({content:a,title:"\u7a97\u53e3",width:600,height:300},b,{contentType:"iframe"});return p(b)}}}(jQuery);
/*juicer v0.6.8模板引擎 插件*/
(function(){var a=function(){var g=[].slice.call(arguments);g.push(a.options);g[0].match(/^\s*#([\w:\-\.]+)\s*$/igm)&&g[0].replace(/^\s*#([\w:\-\.]+)\s*$/igm,function(a,b){var d=document,d=d&&d.getElementById(b);g[0]=d?d.value||d.innerHTML:a});"undefined"!==typeof document&&document.body&&a.compile.call(a,document.body.innerHTML);if(1==arguments.length)return a.compile.apply(a,g);if(2<=arguments.length)return a.to_html.apply(a,g)},m={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(a){return m.escapehash[a]},escaping:function(a){return"string"!==typeof a?a:a.replace(/[&<>"]/igm,this.escapereplace)},detection:function(a){return"undefined"===typeof a?"":a}},n=function(a){if("undefined"!==typeof console){if(console.warn){console.warn(a);return}if(console.log){console.log(a);return}}throw a;},l=function(a,c){a=a!==Object(a)?{}:a;if(a.__proto__)return a.__proto__=c,a;var b=function(){},b=Object.create?Object.create(c):new (b.prototype=c,b),d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b},q=function(a){var c=/,/,b=/^\s*(_?)(\S+?)\1\s*$/,d=[],e;"function"===typeof a?a.length&&(e=a.toString()):"string"===typeof a&&(e=a);e=e.replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,"");e=e.trim();a=e.match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m);e=e.match(/^function[^{]+{([\s\S]*)}/m)[1].trim();for(var f=0;f<a[1].split(c).length;f++)a[1].split(c)[f].replace(b,function(a,b,f){d.push(f)});return[d,e]};a.__cache={};a.version="0.6.9-stable";a.settings={};a.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"};a.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:l({__escapehtml:m,__throw:n,__juicer:a},{})};a.tagInit=function(){var g=a.tags.operationOpen+"\\/each"+a.tags.operationClose,c=a.tags.operationOpen+"if\\s*([^}]*?)"+a.tags.operationClose,b=a.tags.operationOpen+"\\/if"+a.tags.operationClose,d=a.tags.operationOpen+"else"+a.tags.operationClose,e=a.tags.operationOpen+"else if\\s*([^}]*?)"+a.tags.operationClose,f=a.tags.interpolateOpen+"([\\s\\S]+?)"+a.tags.interpolateClose,p=a.tags.noneencodeOpen+"([\\s\\S]+?)"+a.tags.noneencodeClose,k=a.tags.commentOpen+"[^}]*?"+a.tags.commentClose,h=a.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+a.tags.operationClose,r=a.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+a.tags.operationClose,t=a.tags.operationOpen+"helper\\s*([^}]*?)\\s*"+a.tags.operationClose,u=a.tags.operationOpen+"\\/helper"+a.tags.operationClose;a.settings.forstart=new RegExp(a.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+a.tags.operationClose,"igm");a.settings.forend=new RegExp(g,"igm");a.settings.ifstart=new RegExp(c,"igm");a.settings.ifend=new RegExp(b,"igm");a.settings.elsestart=new RegExp(d,"igm");a.settings.elseifstart=new RegExp(e,"igm");a.settings.interpolate=new RegExp(f,"igm");a.settings.noneencode=new RegExp(p,"igm");a.settings.inlinecomment=new RegExp(k,"igm");a.settings.rangestart=new RegExp(h,"igm");a.settings.include=new RegExp(r,"igm");a.settings.helperRegister=new RegExp(t+"([\\s\\S]*?)"+u,"igm")};a.tagInit();a.set=function(a,c){var b=this,d=function(a){return a.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/igm,function(a){return"\\"+a})},e=function(a,f){var e=a.match(/^tag::(.*)$/i);e?(b.tags[e[1]]=d(f),b.tagInit()):b.options[a]=f};if(2===arguments.length)e(a,c);else if(a===Object(a))for(var f in a)a.hasOwnProperty(f)&&e(f,a[f])};a.register=function(a,c){var b=this.options._method;return b.hasOwnProperty(a)?!1:b[a]=c};a.unregister=function(a){var c=this.options._method;if(c.hasOwnProperty(a))return delete c[a]};a.template=function(g){var c=this;this.options=g;this.__interpolate=function(a,d,e){var f=a.split("|");a=f[0]||"";1<f.length&&(a=f.shift(),f=f.shift().split(","),a="_method."+f.shift()+".call({}, "+[a].concat(f)+")");return"<%= "+(d?"_method.__escapehtml.escaping":"")+"("+(e&&!1===e.detection?"":"_method.__escapehtml.detection")+"("+a+")) %>"};this.__removeShell=function(b,d){var e=0;b=b.replace(a.settings.helperRegister,function(b,d,e){e=q(e);var c=e[1];e=new Function(e[0].join(","),c);a.register(d,e);return b}).replace(a.settings.forstart,function(a,b,d,c){d=d||"value";c=c&&c.substr(1);a="i"+e++;return"<% ~function() {for(var "+a+" in "+b+") {if("+b+".hasOwnProperty("+a+")) {var "+d+"="+b+"["+a+"];"+(c?"var "+c+"="+a+";":"")+" %>"}).replace(a.settings.forend,"<% }}}(); %>").replace(a.settings.ifstart,function(a,b){return"<% if("+b+") { %>"}).replace(a.settings.ifend,"<% } %>").replace(a.settings.elsestart,function(a){return"<% } else { %>"}).replace(a.settings.elseifstart,function(a,b){return"<% } else if("+b+") { %>"}).replace(a.settings.noneencode,function(a,b){return c.__interpolate(b,!1,d)}).replace(a.settings.interpolate,function(a,b){return c.__interpolate(b,!0,d)}).replace(a.settings.inlinecomment,"").replace(a.settings.rangestart,function(a,b,d,c){a="j"+e++;return"<% ~function() {for(var "+a+"="+d+";"+a+"<"+c+";"+a+"++) {{var "+b+"="+a+"; %>"}).replace(a.settings.include,function(a,b,d){return b.match(/^file\:\/\//igm)?a:"<%= _method.__juicer("+b+", "+d+"); %>"});d&&!1===d.errorhandling||(b="<% try { %>"+b+'<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>');return b};this.__toNative=function(a,d){return this.__convert(a,!d||d.strip)};this.__lexicalAnalyze=function(b){var d=[],e=[],c="",g="if each _ _method console break case catch continue debugger default delete do finally for function in instanceof new return switch this throw try typeof var void while with null typeof class enum export extends import super implements interface let package private protected public static yield const arguments true false undefined NaN".split(" "),k=function(a,b){if(Array.prototype.indexOf&&a.indexOf===Array.prototype.indexOf)return a.indexOf(b);for(var d=0;d<a.length;d++)if(a[d]===b)return d;return-1},h=function(b,c){c=c.match(/\w+/igm)[0];if(-1===k(d,c)&&-1===k(g,c)&&-1===k(e,c)){if("undefined"!==typeof window&&"function"===typeof window[c]&&window[c].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i)||"undefined"!==typeof global&&"function"===typeof global[c]&&global[c].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return b;if("function"===typeof a.options._method[c]||a.options._method.hasOwnProperty(c))return e.push(c),b;d.push(c)}return b};b.replace(a.settings.forstart,h).replace(a.settings.interpolate,h).replace(a.settings.ifstart,h).replace(a.settings.elseifstart,h).replace(a.settings.include,h).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/igm,h);for(b=0;b<d.length;b++)c+="var "+d[b]+"=_."+d[b]+";";for(b=0;b<e.length;b++)c+="var "+e[b]+"=_method."+e[b]+";";return"<% "+c+" %>"};this.__convert=function(a,c){var e;e="'use strict';var _=_||{};";e+="var _out='';_out+='";return!1!==c?e+=a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e+=a.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"};this.parse=function(a,d){var e=this;d&&!1===d.loose||(a=this.__lexicalAnalyze(a)+a);a=this.__removeShell(a,d);a=this.__toNative(a,d);this._render=new Function("_, _method",a);this.render=function(a,b){b&&b===c.options._method||(b=l(b,c.options._method));return e._render.call(this,a,b)};return this}};a.compile=function(a,c){c&&c===this.options||(c=l(c,this.options));try{var b=this.__cache[a]?this.__cache[a]:(new this.template(this.options)).parse(a,c);c&&!1===c.cache||(this.__cache[a]=b);return b}catch(d){return n("Juicer Compile Exception: "+d.message),{render:function(){}}}};a.to_html=function(a,c,b){b&&b===this.options||(b=l(b,this.options));return this.compile(a,b).render(c,b._method)};"undefined"!==typeof global&&"undefined"===typeof window&&a.set("cache",!1);"undefined"!==typeof module&&module.exports?module.exports=a:this.juicer=a})();
/*cookie 插件*/
(function(a){if(typeof define==='function'&&define.amd){define(['jquery'],a)}else if(typeof exports==='object'){a(require('jquery'))}else{a(jQuery)}}(function($){var k=/\+/g;function encode(s){return m.raw?s:encodeURIComponent(s)}function decode(s){return m.raw?s:decodeURIComponent(s)}function stringifyCookieValue(a){return encode(m.json?JSON.stringify(a):String(a))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\')}try{s=decodeURIComponent(s.replace(k,' '));return m.json?JSON.parse(s):s}catch(e){}}function read(s,a){var b=m.raw?s:parseCookieValue(s);return $.isFunction(a)?a(b):b}var m=$.cookie=function(a,b,c){if(b!==undefined&&!$.isFunction(b)){c=$.extend({},m.defaults,c);if(typeof c.expires==='number'){var d=c.expires,t=c.expires=new Date();t.setTime(+t+d*864e+5)}return(document.cookie=[encode(a),'=',stringifyCookieValue(b),c.expires?'; expires='+c.expires.toUTCString():'',c.path?'; path='+c.path:'',c.domain?'; domain='+c.domain:'',c.secure?'; secure':''].join(''))}var e=a?undefined:{};var f=document.cookie?document.cookie.split('; '):[];for(var i=0,l=f.length;i<l;i++){var g=f[i].split('=');var h=decode(g.shift());var j=g.join('=');if(a&&a===h){e=read(j,b);break}if(!a&&(j=read(j))!==undefined){e[h]=j}}return e};m.defaults={};$.removeCookie=function(a,b){if($.cookie(a)===undefined){return false}$.cookie(a,'',$.extend({},b,{expires:-1}));return!$.cookie(a)}}));
/*Validform_v5.3.2*/
(function(d,f,b){var g=null,j=null,i=true;var e={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！","n":"请填写数字！","n6-16":"请填写6到16位数字！","s":"不能输入特殊字符！","s6-18":"请填写6到18位字符！","p":"请填写邮政编码！","m":"请填写手机号码！","e":"邮箱地址格式不对！","url":"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"};d.Tipmsg=e;var a=function(l,n,k){var n=d.extend({},a.defaults,n);n.datatype&&d.extend(a.util.dataType,n.datatype);var m=this;m.tipmsg={w:{}};m.settings=n;m.forms=l;m.objects=[];if(k===true){return false}l.each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var o=d(this);this.validform_status="normal";this.validform_label=n.label;o.data("tipmsg",m.tipmsg);o.delegate("[datatype]","blur",function(){var p=arguments[1];a.util.check.call(this,o,m,p)});a.util.enhance.call(o,n.tiptype,n.usePlugin,n.tipSweep);n.btnSubmit&&o.find(n.btnSubmit).bind("click",function(){o.trigger("submit");return false});o.submit(function(){var p=a.util.submitForm.call(o,n);p===b&&(p=true);return p});o.find("[type='reset']").add(o.find(n.btnReset)).bind("click",function(){a.util.resetForm.call(o)})});if(n.tiptype==1||(n.tiptype==2||n.tiptype==3)&&n.ajaxPost){c()}};a.defaults={tiptype:1,tipSweep:false,showAllError:false,postonce:false,ajaxPost:false};a.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},toString:Object.prototype.toString,isEmpty:function(k){return k===""||k===d.trim(this.attr("tip"))},getValue:function(m){var l,k=this;if(m.is(":radio")){l=k.find(":radio[name='"+m.attr("name")+"']:checked").val();l=l===b?"":l}else{if(m.is(":checkbox")){l="";k.find(":checkbox[name='"+m.attr("name")+"']:checked").each(function(){l+=d(this).val()+","});l=l===b?"":l}else{l=m.val()}}l=d.trim(l);return a.util.isEmpty.call(m,l)?"":l},enhance:function(l,m,n,k){var o=this;o.find("[datatype]").each(function(){if(l==2){if(d(this).parent().next().find(".Validform_checktip").length==0){d(this).parent().next().append("<span class='Validform_checktip' />")}}else{if(l==3||l==4){if(d(this).siblings(".Validform_checktip").length==0){d(this).parent().append("<span class='Validform_checktip' />")}}}});o.find("input[recheck]").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var q=d(this);var p=o.find("input[name='"+d(this).attr("recheck")+"']");p.bind("keyup",function(){if(p.val()==q.val()&&p.val()!=""){if(p.attr("tip")){if(p.attr("tip")==p.val()){return false}}q.trigger("blur")}}).bind("blur",function(){if(p.val()!=q.val()&&q.val()!=""){if(q.attr("tip")){if(q.attr("tip")==q.val()){return false}}q.trigger("blur")}})});o.find("[tip]").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var q=d(this).attr("tip");var p=d(this).attr("altercss");d(this).focus(function(){if(d(this).val()==q){d(this).val("");if(p){d(this).removeClass(p)}}}).blur(function(){if(d.trim(d(this).val())===""){d(this).val(q);if(p){d(this).addClass(p)}}})});o.find(":checkbox[datatype],:radio[datatype]").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var q=d(this);var p=q.attr("name");o.find("[name='"+p+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){q.trigger("blur")},0)})});o.find("select[datatype][multiple]").bind("click",function(){var p=d(this);setTimeout(function(){p.trigger("blur")},0)});a.util.usePlugin.call(o,m,l,n,k)},usePlugin:function(o,l,n,r){var s=this,o=o||{};if(s.find("input[plugin='swfupload']").length&&typeof(swfuploadhandler)!="undefined"){var k={custom_settings:{form:s,showmsg:function(v,t,u){a.util.showmsg.call(s,v,l,{obj:s.find("input[plugin='swfupload']"),type:t,sweep:n})}}};k=d.extend(true,{},o.swfupload,k);s.find("input[plugin='swfupload']").each(function(t){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";d(this).val("");swfuploadhandler.init(k,t)})}if(s.find("input[plugin='datepicker']").length&&d.fn.datePicker){o.datepicker=o.datepicker||{};if(o.datepicker.format){Date.format=o.datepicker.format;delete o.datepicker.format}if(o.datepicker.firstDayOfWeek){Date.firstDayOfWeek=o.datepicker.firstDayOfWeek;delete o.datepicker.firstDayOfWeek}s.find("input[plugin='datepicker']").each(function(t){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";o.datepicker.callback&&d(this).bind("dateSelected",function(){var u=new Date(d.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);o.datepicker.callback(u,this)});d(this).datePicker(o.datepicker)})}if(s.find("input[plugin*='passwordStrength']").length&&d.fn.passwordStrength){o.passwordstrength=o.passwordstrength||{};o.passwordstrength.showmsg=function(u,v,t){a.util.showmsg.call(s,v,l,{obj:u,type:t,sweep:n})};s.find("input[plugin='passwordStrength']").each(function(t){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";d(this).passwordStrength(o.passwordstrength)})}if(r!="addRule"&&o.jqtransform&&d.fn.jqTransSelect){var m=function(t){var u=d(".jqTransformSelectWrapper ul:visible");u.each(function(){var v=d(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);if(!(t&&v.oLabel&&v.oLabel.get(0)==t.get(0))){d(this).hide()}})};var p=function(t){if(d(t.target).parents(".jqTransformSelectWrapper").length===0){m(d(t.target))}};var q=function(){d(document).mousedown(p)};if(o.jqtransform.selector){s.find(o.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton();s.find(o.jqtransform.selector).filter("input:text, input:password").jqTransInputText();s.find(o.jqtransform.selector).filter("input:checkbox").jqTransCheckBox();s.find(o.jqtransform.selector).filter("input:radio").jqTransRadio();s.find(o.jqtransform.selector).filter("textarea").jqTransTextarea();if(s.find(o.jqtransform.selector).filter("select").length>0){s.find(o.jqtransform.selector).filter("select").jqTransSelect();q()}}else{s.jqTransform()}s.find(".jqTransformSelectWrapper").find("li a").click(function(){d(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(o){var n=this;var m=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g;var k;var l=o[0].validform_label||".Validform_label";l=n.siblings(l).text()||n.siblings().find(l).text()||n.parent().siblings(l).text()||n.parent().siblings().find(l).text();l=l.match(m)||[""];m=/\{(.+)\|(.+)\}/;k=o.data("tipmsg").s||e.s;l=l[0].replace(/\s(?![a-zA-Z])/g,"");if(l!=""){k=k.replace(/\{0\|(.+)\}/,l);if(n.attr("recheck")){k=k.replace(/\{(.+)\}/,"");n.attr("nullmsg",k);return k}}else{k=n.is(":checkbox,:radio,select")?k.replace(/\{0\|(.+)\}/,""):k.replace(/\{0\|(.+)\}/,"$1")}k=n.is(":checkbox,:radio,select")?k.replace(m,"$2"):k.replace(m,"$1");n.attr("nullmsg",k);return k},getErrormsg:function(s,o,u){var n=this;var p=/^(.+?)((\d+)-(\d+))?$/,m=/^(.+?)(\d+)-(\d+)$/,l=/(.*?)\d+(.+?)\d+(.*)/,q=o.match(p),t,r;if(u=="recheck"){r=s.data("tipmsg").reck||e.reck;return r}if(q[0] in e.w){return s.data("tipmsg").w[q[0]]||e.w[q[0]]}for(var k in e.w){if(k.indexOf(q[1])!=-1&&m.test(k)){r=(s.data("tipmsg").w[k]||e.w[k]).replace(l,"$1"+q[3]+"$2"+q[4]+"$3");e.w[q[0]]=r;return r}}return s.data("tipmsg").def||e.def},_regcheck:function(t,n,u,A){var A=A,y=null,v=false,o=/\/.+\//g,k=/^(.+?)(\d+)-(\d+)$/,l=3;if(o.test(t)){var s=t.match(o)[0].slice(1,-1);var r=t.replace(o,"");var q=RegExp(s,r);v=q.test(n)}else{if(a.util.toString.call(a.util.dataType[t])=="[object Function]"){v=a.util.dataType[t](n,u,A,a.util.dataType);if(v===true||v===b){v=true}else{y=v;v=false}}else{if(!(t in a.util.dataType)){var m=t.match(k),z;if(!m){v=false;y=A.data("tipmsg").undef||e.undef}else{for(var B in a.util.dataType){z=B.match(k);if(!z){continue}if(m[1]===z[1]){var w=a.util.dataType[B].toString(),r=w.match(/\/[mgi]*/g)[1].replace("/",""),x=new RegExp("\\{"+z[2]+","+z[3]+"\\}","g");w=w.replace(/\/[mgi]*/g,"/").replace(x,"{"+m[2]+","+m[3]+"}").replace(/^\//,"").replace(/\/$/,"");a.util.dataType[t]=new RegExp(w,r);break}}}}if(a.util.toString.call(a.util.dataType[t])=="[object RegExp]"){v=a.util.dataType[t].test(n)}}}if(v){l=2;y=u.attr("sucmsg")||A.data("tipmsg").r||e.r;if(u.attr("recheck")){var p=A.find("input[name='"+u.attr("recheck")+"']:first");if(n!=p.val()){v=false;l=3;y=u.attr("errormsg")||a.util.getErrormsg.call(u,A,t,"recheck")}}}else{y=y||u.attr("errormsg")||a.util.getErrormsg.call(u,A,t);if(a.util.isEmpty.call(u,n)){y=u.attr("nullmsg")||a.util.getNullmsg.call(u,A)}}return{passed:v,type:l,info:y}},regcheck:function(n,s,m){var t=this,k=null,l=false,r=3;if(m.attr("ignore")==="ignore"&&a.util.isEmpty.call(m,s)){if(m.data("cked")){k=""}return{passed:true,type:4,info:k}}m.data("cked","cked");var u=a.util.parseDatatype(n);var q;for(var p=0;p<u.length;p++){for(var o=0;o<u[p].length;o++){q=a.util._regcheck(u[p][o],s,m,t);if(!q.passed){break}}if(q.passed){break}}return q},parseDatatype:function(r){var q=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,o=r.match(q),p=r.replace(q,"").replace(/\s*/g,"").split(""),l=[],k=0;l[0]=[];l[0].push(o[0]);for(var s=0;s<p.length;s++){if(p[s]=="|"){k++;l[k]=[]}l[k].push(o[s+1])}return l},showmsg:function(n,l,m,k){if(n==b){return}if(k=="bycheck"&&m.sweep&&(m.obj&&!m.obj.is(".Validform_error")||typeof l=="function")){return}d.extend(m,{curform:this});if(typeof l=="function"){l(n,m,a.util.cssctl);return}if(l==1||k=="byajax"&&l!=4){j.find(".Validform_info").html(n)}if(l==1&&k!="bycheck"&&m.type!=2||k=="byajax"&&l!=4){i=false;j.find(".iframe").css("height",j.outerHeight());j.show();h(j,100)}if(l==2&&m.obj){m.obj.parent().next().find(".Validform_checktip").html(n);a.util.cssctl(m.obj.parent().next().find(".Validform_checktip"),m.type)}if((l==3||l==4)&&m.obj){m.obj.siblings(".Validform_checktip").html(n);a.util.cssctl(m.obj.siblings(".Validform_checktip"),m.type)}},cssctl:function(l,k){switch(k){case 1:l.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:l.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:l.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:l.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(w,r,u,n){var o=r.settings;var u=u||"";var k=a.util.getValue.call(w,d(this));if(o.ignoreHidden&&d(this).is(":hidden")||d(this).data("dataIgnore")==="dataIgnore"){return true}if(o.dragonfly&&!d(this).data("cked")&&a.util.isEmpty.call(d(this),k)&&d(this).attr("ignore")!="ignore"){return false}var t=a.util.regcheck.call(w,d(this).attr("datatype"),k,d(this));if(k==this.validform_lastval&&!d(this).attr("recheck")&&u==""){return t.passed?true:false}this.validform_lastval=k;var s;g=s=d(this);if(!t.passed){a.util.abort.call(s[0]);if(!n){a.util.showmsg.call(w,t.info,o.tiptype,{obj:d(this),type:t.type,sweep:o.tipSweep},"bycheck");!o.tipSweep&&s.addClass("Validform_error")}return false}var q=d(this).attr("ajaxurl");if(q&&!a.util.isEmpty.call(d(this),k)&&!n){var m=d(this);if(u=="postform"){m[0].validform_subpost="postform"}else{m[0].validform_subpost=""}if(m[0].validform_valid==="posting"&&k==m[0].validform_ckvalue){return"ajax"}m[0].validform_valid="posting";m[0].validform_ckvalue=k;a.util.showmsg.call(w,r.tipmsg.c||e.c,o.tiptype,{obj:m,type:1,sweep:o.tipSweep},"bycheck");a.util.abort.call(s[0]);var v=w[0].validform_config||{};v=v.ajaxurl||{};var p={type:"POST",cache:false,url:q,data:"param="+encodeURIComponent(k)+"&name="+encodeURIComponent(d(this).attr("name")),success:function(y){if(d.trim(y.status)==="y"){m[0].validform_valid="true";y.info&&m.attr("sucmsg",y.info);a.util.showmsg.call(w,m.attr("sucmsg")||r.tipmsg.r||e.r,o.tiptype,{obj:m,type:2,sweep:o.tipSweep},"bycheck");s.removeClass("Validform_error");g=null;if(m[0].validform_subpost=="postform"){w.trigger("submit")}}else{m[0].validform_valid=y.info;a.util.showmsg.call(w,y.info,o.tiptype,{obj:m,type:3,sweep:o.tipSweep});s.addClass("Validform_error")}s[0].validform_ajax=null},error:function(y){if(y.status=="200"){if(y.responseText=="y"){v.success({status:"y"})}else{v.success({status:"n",info:y.responseText})}return false}if(y.statusText!=="abort"){var z="status: "+y.status+"; statusText: "+y.statusText;a.util.showmsg.call(w,z,o.tiptype,{obj:m,type:3,sweep:o.tipSweep});s.addClass("Validform_error")}m[0].validform_valid=y.statusText;s[0].validform_ajax=null;return true}};if(v.success){var x=v.success;v.success=function(y){p.success(y);x(y,m)}}if(v.error){var l=v.error;v.error=function(y){p.error(y)&&l(y,m)}}v=d.extend({},p,v,{dataType:"json"});s[0].validform_ajax=d.ajax(v);return"ajax"}else{if(q&&a.util.isEmpty.call(d(this),k)){a.util.abort.call(s[0]);s[0].validform_valid="true"}}if(!n){a.util.showmsg.call(w,t.info,o.tiptype,{obj:d(this),type:t.type,sweep:o.tipSweep},"bycheck");s.removeClass("Validform_error")}g=null;return true},submitForm:function(p,l,k,s,u){var x=this;if(x[0].validform_status==="posting"){return false}if(p.postonce&&x[0].validform_status==="posted"){return false}var w=p.beforeCheck&&p.beforeCheck(x);if(w===false){return false}var t=true,o;x.find("[datatype]").each(function(){if(l){return false}if(p.ignoreHidden&&d(this).is(":hidden")||d(this).data("dataIgnore")==="dataIgnore"){return true}var A=a.util.getValue.call(x,d(this)),B;g=B=d(this);o=a.util.regcheck.call(x,d(this).attr("datatype"),A,d(this));if(!o.passed){a.util.showmsg.call(x,o.info,p.tiptype,{obj:d(this),type:o.type,sweep:p.tipSweep});B.addClass("Validform_error");if(!p.showAllError){B.focus();t=false;return false}t&&(t=false);return true}if(d(this).attr("ajaxurl")&&!a.util.isEmpty.call(d(this),A)){if(this.validform_valid!=="true"){var z=d(this);a.util.showmsg.call(x,x.data("tipmsg").v||e.v,p.tiptype,{obj:z,type:3,sweep:p.tipSweep});B.addClass("Validform_error");z.trigger("blur",["postform"]);if(!p.showAllError){t=false;return false}t&&(t=false);return true}}else{if(d(this).attr("ajaxurl")&&a.util.isEmpty.call(d(this),A)){a.util.abort.call(this);this.validform_valid="true"}}a.util.showmsg.call(x,o.info,p.tiptype,{obj:d(this),type:o.type,sweep:p.tipSweep});B.removeClass("Validform_error");g=null});if(p.showAllError){x.find(".Validform_error:first").focus()}if(t){var r=p.beforeSubmit&&p.beforeSubmit(x);if(r===false){return false}x[0].validform_status="posting";var m=x[0].validform_config||{};if(p.ajaxPost||s==="ajaxPost"){var v=m.ajaxpost||{};v.url=k||v.url||m.url||x.attr("action");v.success||v.error||a.util.showmsg.call(x,x.data("tipmsg").p||e.p,p.tiptype,{obj:x,type:1,sweep:p.tipSweep},"byajax");if(u){v.async=false}else{if(u===false){v.async=true}}if(v.success){var y=v.success;v.success=function(z){p.callback&&p.callback(z);x[0].validform_ajax=null;if(d.trim(z.status)==="y"){x[0].validform_status="posted"}else{x[0].validform_status="normal"}y(z,x)}}if(v.error){var n=v.error;v.error=function(z){p.callback&&p.callback(z);x[0].validform_status="normal";x[0].validform_ajax=null;n(z,x)}}var q={type:"POST",async:true,data:x.serializeArray(),success:function(z){if(d.trim(z.status)==="y"){x[0].validform_status="posted";a.util.showmsg.call(x,z.info,p.tiptype,{obj:x,type:2,sweep:p.tipSweep},"byajax")}else{x[0].validform_status="normal";a.util.showmsg.call(x,z.info,p.tiptype,{obj:x,type:3,sweep:p.tipSweep},"byajax")}p.callback&&p.callback(z);x[0].validform_ajax=null},error:function(z){var A="status: "+z.status+"; statusText: "+z.statusText;a.util.showmsg.call(x,A,p.tiptype,{obj:x,type:3,sweep:p.tipSweep},"byajax");p.callback&&p.callback(z);x[0].validform_status="normal";x[0].validform_ajax=null}};v=d.extend({},q,v,{dataType:"json"});x[0].validform_ajax=d.ajax(v)}else{if(!p.postonce){x[0].validform_status="normal"}var k=k||m.url;if(k){x.attr("action",k)}return p.callback&&p.callback(x)}}return false},resetForm:function(){var k=this;k.each(function(){this.reset();this.validform_status="normal"});k.find(".Validform_right").text("");k.find(".passwordStrength").children().removeClass("bgStrength");k.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading");k.find(".Validform_error").removeClass("Validform_error");k.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null});k.eq(0).find("input:first").focus()},abort:function(){if(this.validform_ajax){this.validform_ajax.abort()}}};d.Datatype=a.util.dataType;a.prototype={dataType:a.util.dataType,eq:function(l){var k=this;if(l>=k.forms.length){return null}if(!(l in k.objects)){k.objects[l]=new a(d(k.forms[l]).get(),k.settings,true)}return k.objects[l]},resetStatus:function(){var k=this;d(k.forms).each(function(){this.validform_status="normal"});return this},setStatus:function(k){var l=this;d(l.forms).each(function(){this.validform_status=k||"posting"});return this},getStatus:function(){var l=this;var k=d(l.forms)[0].validform_status;return k},ignore:function(k){var l=this;var k=k||"[datatype]";d(l.forms).find(k).each(function(){d(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")});return this},unignore:function(k){var l=this;var k=k||"[datatype]";d(l.forms).find(k).each(function(){d(this).removeData("dataIgnore")});return this},addRule:function(n){var m=this;var n=n||[];for(var l=0;l<n.length;l++){var p=d(m.forms).find(n[l].ele);for(var k in n[l]){k!=="ele"&&p.attr(k,n[l][k])}}d(m.forms).each(function(){var o=d(this);a.util.enhance.call(o,m.settings.tiptype,m.settings.usePlugin,m.settings.tipSweep,"addRule")});return this},ajaxPost:function(k,m,l){var n=this;if(n.settings.tiptype==1||n.settings.tiptype==2||n.settings.tiptype==3){c()}a.util.submitForm.call(d(n.forms[0]),n.settings,k,l,"ajaxPost",m);return this},submitForm:function(k,l){var n=this;var m=a.util.submitForm.call(d(n.forms[0]),n.settings,k,l);m===b&&(m=true);if(m===true){n.forms[0].submit()}return this},resetForm:function(){var k=this;a.util.resetForm.call(d(k.forms));return this},abort:function(){var k=this;d(k.forms).each(function(){a.util.abort.call(this)});return this},check:function(m,k){var k=k||"[datatype]",o=this,n=d(o.forms),l=true;n.find(k).each(function(){a.util.check.call(this,n,o,"",m)||(l=false)});return l},config:function(k){var l=this;k=k||{};d(l.forms).each(function(){this.validform_config=d.extend(true,this.validform_config,k)});return this}};d.fn.Validform=function(k){return new a(this,k)};function h(n,m){var l=(d(window).width()-n.outerWidth())/2,k=(d(window).height()-n.outerHeight())/2,k=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(k>0?k:0);n.css({left:l}).animate({top:k},{duration:m,queue:false})}function c(){if(d("#Validform_msg").length!==0){return false}j=d('<div id="Validform_msg"><div class="Validform_title">'+e.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;</a></div><div class="Validform_info"></div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"></iframe></div></div>').appendTo("body");j.find("a.Validform_close").click(function(){j.hide();i=true;if(g){g.focus().addClass("Validform_error")}return false}).focus(function(){this.blur()});d(window).bind("scroll resize",function(){!i&&h(j,400)})}d.Showmsg=function(k){c();a.util.showmsg.call(f,k,1,{})};d.Hidemsg=function(){j.hide();i=true}})(jQuery,window);
/*新html5上传插件*/
(function(){function d(a){if(!(this instanceof d))return new d(a);"[object String]"===Object.prototype.toString.call(a)&&(a={trigger:a});var b={trigger:null,name:null,action:null,data:null,accept:null,change:null,error:null,multiple:!0,success:null};a&&$.extend(b,a);a=$(b.trigger);b.action=b.action||a.data("action")||"/upload";b.name=b.name||a.attr("name")||a.data("name")||"file";var c;if(!(c=b.data)){var e=a.data("data");if(e){c={};for(var e=e.split("&"),h=0;h<e.length;h++){var g=e[h].split("="),f=decodeURIComponent(g[0].replace(/\+/g," ")),g=decodeURIComponent(g[1].replace(/\+/g," "));c[f]=g}}else c={}}b.data=c;b.accept=b.accept||a.data("accept");b.success=b.success||a.data("success");this.settings=b;this.setup();this.bind()}function k(a){if(!a)return[];var b=[],c,e;for(e in a)c=document.createElement("input"),c.type="hidden",c.name=e,c.value=a[e],b.push(c);return b}function n(a){a=a.parentsUntil("body");for(var b=0,c=0;c<a.length;c++){var e=a.eq(c);"static"!==e.css("position")&&(b=parseInt(e.css("zIndex"),10)||b)}return b}function m(){var a=$('<iframe name="iframe-uploader-'+l+'" />').hide();l+=1;return a}function f(a){if(!(this instanceof f))return new f(a);"[object String]"===Object.prototype.toString.call(a)&&(a={trigger:a});var b=[];$(a.trigger).each(function(c,e){a.trigger=e;b.push(new d(a))});this._uploaders=b}var l=0;d.prototype.setup=function(){this.form=$('<form method="post" enctype="multipart/form-data"target="" action="'+this.settings.action+'" />');this.iframe=m();this.form.attr("target",this.iframe.attr("name"));this.form.append(k(this.settings.data));window.FormData?this.form.append(k({_uploader_:"formdata"})):this.form.append(k({_uploader_:"iframe"}));var a=document.createElement("input");a.type="file";a.name=this.settings.name;this.settings.accept&&(a.accept=this.settings.accept);this.settings.multiple&&(a.multiple=!0,a.setAttribute("multiple","multiple"));this.input=$(a);a=$(this.settings.trigger);this.input.attr("hidefocus",!0).css({position:"absolute",top:0,right:0,opacity:0,outline:0,cursor:"pointer",height:a.outerHeight(),fontSize:Math.max(64,5*a.outerHeight())});this.form.append(this.input);this.form.css({position:"absolute",top:a.offset().top,left:a.offset().left,overflow:"hidden",width:a.outerWidth(),height:a.outerHeight(),zIndex:n(a)+10}).appendTo("body");return this};d.prototype.bind=function(){var a=this,b=$(a.settings.trigger);b.mouseenter(function(){a.form.css({top:b.offset().top,left:b.offset().left,width:b.outerWidth(),height:b.outerHeight()})});a.bindInput()};d.prototype.bindInput=function(){var a=this;a.input.change(function(b){a._files=this.files||[{name:b.target.value}];b=a.input.val();if(a.settings.change)a.settings.change.call(a,a._files);else if(b)return a.submit()})};d.prototype.submit=function(){var a=this;if(window.FormData&&a._files){var b=new FormData(a.form.get(0));b.append(a.settings.name,a._files);var c;if(a.settings.progress){var e=a._files;c=function(){var b=$.ajaxSettings.xhr();b.upload&&b.upload.addEventListener("progress",function(b){var c=0,d=b.loaded||b.position,f=b.total;b.lengthComputable&&(c=Math.ceil(d/f*100));a.settings.progress(b,d,f,c,e,$(a.settings.trigger))},!1);return b}}$.ajax({url:a.settings.action,type:"post",processData:!1,contentType:!1,data:b,xhr:c,context:this,success:a.settings.success,error:a.settings.error})}else a.iframe=m(),a.form.attr("target",a.iframe.attr("name")),$("body").append(a.iframe),a.iframe.one("load",function(){$('<iframe src="javascript:false;"></iframe>').appendTo(a.form).remove();var b;try{b=$(this).contents().find("body").html()}catch(c){b="cross-domain"}$(this).remove();b?a.settings.success&&a.settings.success(b):a.settings.error&&a.settings.error(a.input.val())}),a.form.submit();return this};d.prototype.refreshInput=function(){var a=this.input.clone();this.input.before(a);this.input.off("change");this.input.remove();this.input=a;this.bindInput()};d.prototype.change=function(a){if(!a)return this;this.settings.change=a;return this};d.prototype.success=function(a){var b=this;this.settings.success=function(c){b.refreshInput();a&&a(c,$(b.settings.trigger))};return this};d.prototype.error=function(a){var b=this;this.settings.error=function(c){a&&(b.refreshInput(),a(c,$(b.settings.trigger)))};return this};d.prototype.enable=function(){this.input.prop("disabled",!1);this.input.css("cursor","pointer")};d.prototype.disable=function(){this.input.prop("disabled",!0);this.input.css("cursor","not-allowed")};f.prototype.submit=function(){$.each(this._uploaders,function(a,b){b.submit()});return this};f.prototype.change=function(a){$.each(this._uploaders,function(b,c){c.change(a)});return this};f.prototype.success=function(a){$.each(this._uploaders,function(b,c){c.success(a)});return this};f.prototype.error=function(a){$.each(this._uploaders,function(b,c){c.error(a)});return this};f.prototype.enable=function(){$.each(this._uploaders,function(a,b){b.enable()});return this};f.prototype.disable=function(){$.each(this._uploaders,function(a,b){b.disable()});return this};f.Uploader=d;window.MultipleUploader=f})();
/*后台对应的状态码*/
var STATUSCODE = {0:'请输入正确的邮箱地址',1:'6-16个字，由英文字母、英文符号或数字组成，区分大小写',2:'两次输入密码不一致',3:'验证码填写错误',4:'此邮箱已被注册，请更换',5:'请填写已注册SPLUS账号或手机号',6:'请填写正确的密码',7:'恭喜，登录成功',8:'很遗憾，登录失败',9:'恭喜您，注册成功',10:'很遗憾，注册失败',11:'您已成功退出',12:'修改成功',13:'修改失败',14:'请填写正确的手机号码',15:'请填写开发者账号',17:'长度不能超过20个字',19:'1-16个字，由英文字母、英文符号或数字组成，区分大小写，一经设置无法更改',20:'此账号已被注册，请更换',21:'含有非法字符',22:'账号名称为2-20个字，一经设置无法更改',23:'长度不能超过240个字',24:'提交成功',25:'提交失败',26:'操作过期',27:'长度为2-20个字',28:'此角色名称已被注册，请更换',29:'恭喜您，提交成功',30:'很遗憾，提交失败',31:'参数错误',32:'您没有权限',33:'删除失败',34:'删除成功',35:'此应用名称已存在，请更换',36:'请先登录……',37:'请先完善信息……',38:'不存在……',39:'没有相关数据',40:'没有填写任何信息',41:'验证码不匹配',42:'此手机号已被注册过',43:'用户名已经存在',44:'2-20个字符：英文，数字和中文',45:'请填写正确的联系电话',46:'请填写省份',47:'请填写城市',48:'请填写区县',49:'请填写详细地址',50:'地址过长',51:'请填写标签',52:'请选择模板',53:'此名称已存在，请更换',54:'还不能删除',55:'认证申请提交成功',56:'请填写联系人',57:'请填写联系电话',58:'请填写身份证号',59:'请上传身份证扫描件',60:'请选择企业分类',61:'请选择企业小分类',62:'请填写公司全称',63:'请上传LOGO图片',64:'请填写详细地址',65:'请填写公司电话',66:'请填写联系人',67:'请填写联系电话',68:'请填写天讯个人账号',69:'请上传营业执照扫描',70:'创建店铺失败'};

//切换标签通用方法
~function(){
  var $tabs = $('.tabWarp').find('.tabHd');
  if(!$tabs.length){return;}	//如果没标签的页面就不往下执行
  $tabs.on('click','span',function(e){
    var $t = $(this),idx = $t.parent().find('span').index(this);
    var $bd = $t.closest('.tabWarp').find('.tabBd');
    $t.addClass('crt').siblings().removeClass('crt');
    $bd.addClass('none').eq(idx).removeClass('none');
  });
}();

//美化复选框涉及的方法
$('.cb-orig').change(function(){$(this).prev('.checkbox').toggleClass('checked');});

//侧边栏状态；页面内放一个隐藏域，从零开始。
!function(){
	var $id = $('#menuIndex');	//如果有这个隐藏域就加载
	if ($id.length) {
		var v = $id.val();
		$('#menu').find('.db').eq(v).addClass('act');
	}
}();